# é¢å‘å¯¹è±¡ï¼ˆä¸‹ï¼‰

ç”±äº JS çš„å†å²é—ç•™é—®é¢˜ã€‚ä¸æ˜¯ä¸¥æ ¼æ„ä¹‰ä¸Šçš„æŠŠ OOP åšçš„å¾ˆå¥½çš„è¯­è¨€ï¼Œèµ·ç æˆ‘è§‰å¾— ES5 å’Œ ES6 ä¹‹é—´æœ‰æ—¶å€™å°±éš¾èˆéš¾åˆ†çš„ã€‚

è¿™ä¸ªå­¦ä¸å¥½ï¼Œå…¶å®å†™å¾ˆå¤šæ¡†æ¶+æ‰“ä»£ç çš„æ—¶å€™éƒ½å¾ˆå›°éš¾ã€‚æ‰€ä»¥æ•´ç†ä¸€ä¸‹ææ‡‚ JS æµç¨‹ã€‚

> JS é‡Œå‡½æ•°æ‰æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œå¯¹è±¡æ ¹æœ¬ä¸ç®—å•¥ã€‚å¦‚æœä½ éè¯´ JS æœ‰å¯¹è±¡ï¼Œé‚£æˆ‘è§‰å¾— JS é‡Œçš„æ‰€è°“å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ä¸ªå†…å­˜åœ°å€è€Œå·²ã€‚
>
> æ¢è¨€ä¹‹ï¼Œåªè¦æ˜¯æœ‰å†…å­˜åœ°å€çš„éƒ½å¯ä»¥ç®—å¾—ä¸Šæ˜¯å¯¹è±¡å§ã€‚

## 1. å­¦ä¹ æµç¨‹

æ­¤å¤„ç¼ºä¸ªå›¾ï¼Œå…¨éƒ¨å†™å®Œæˆ‘åœ¨è¡¥ã€‚

- åˆ›å»ºå¯¹è±¡çš„ n ç§æ–¹å¼
- this çš„æŒ‡å‘é—®é¢˜
- Object ç±»çš„ç”¨æ³•
- call/bind/apply çš„ä½¿ç”¨æ–¹æ³•+åŸç†å®ç°
- æ„é€ å‡½æ•°+åŸå‹+åŸå‹é“¾
- ES6 è¯­æ³•

## 2. å­¦ä¹ ç›®æ ‡

- å¯ä»¥æ‰‹å†™æ¨¡æ‹Ÿ new åˆ›å»ºçš„è¿‡ç¨‹
- å¯ä»¥æŠŠ this çš„æŒ‡å‘çš„ä¸€äº›é¢˜ç›®å†™å‡ºæ¥
- å¯ä»¥æ‰‹å†™ call/bind/apply å‡½æ•°
- å¯ä»¥æ‰‹å†™ JS çš„ç»§æ‰¿

## 3. éšå¼åŸå‹ [[Prototype]]

é¦–å…ˆè¦çŸ¥é“**ä»€ä¹ˆæ˜¯éšå¼åŸå‹ï¼Ÿä¸ºä»€ä¹ˆå«éšå¼åŸå‹ï¼Ÿä»€ä¹ˆæ•°æ®ç±»å‹æœ‰éšå¼åŸå‹ï¼Ÿå¦‚ä½•æ‰èƒ½æŸ¥çœ‹ï¼Ÿ**

ä¸ºäº†è¦èŠ‚çœç©ºé—´ï¼Œè¿™é‡Œå…ˆè¯´ä¸€ä¸‹åŸå‹çš„æ¦‚å¿µã€‚

- æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯æœ‰ä¸€ä¸ªåŸå‹çš„`[[Prototype]]` ï¼ˆæ—©æœŸ ECMA æ²¡æœ‰è§„èŒƒå»æŸ¥çœ‹åŸå‹ï¼Œè¿™ä¸ªåŒæ‹¬å·ä¹Ÿåªæ˜¯ä¸ª es ç©ºæ³›è§„å®šçš„ï¼Œåœ¨ä¸åŒçš„åœ°æ–¹æœ‰è‡ªå·±ä¸åŒçš„å®ç°æ–¹å¼çš„æ—¶å€™ä»–å°±è¿™æ ·å†™
- åæ¥æµè§ˆå™¨ä¸ºäº†è®©å¤§å®¶æŸ¥çœ‹ï¼Œå„å®¶è‡ªå·±è§„å®šäº†ä¸€äº›æŸ¥çœ‹åŸå‹çš„æ–¹æ³•ï¼Œæ¯”å¦‚ \_\_proto\_\_ï¼Œé»˜è®¤æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ã€‚
- ä½†æ˜¯è¿™å¹¶ä¸æ˜¯æ­£è§„çš„ï¼ŒES5 ä¹‹åæä¾›çš„ `Object.getPrototypeOf(obj)`

ä¸Šé¢çš„ä¸€æ®µè¯æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå¯¹è±¡åŸå‹ï¼ˆåˆå«**éšå¼åŸå‹**ï¼‰ã€‚æµè§ˆå™¨æœ‰æµè§ˆå™¨çš„æŸ¥çœ‹ï¼Œes æœ‰ es çš„æŸ¥çœ‹æ–¹æ³•ã€‚

![image-20230120143521770](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20230120143521770.png)

> åŸå‹æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ

```javascript
// å½“æˆ‘ä»¬ä»ä¸€ä¸ªå¯¹è±¡ä¸­è·å–æŸä¸€ä¸ªå±æ€§æ—¶, å®ƒä¼šè§¦å‘ [[get]] æ“ä½œ obj["name"],obj.a è¿™äº›éƒ½æ˜¯getterè¿‡ç¨‹
// 1. ä¼šä¼˜å…ˆåœ¨å½“å‰å¯¹è±¡ä¸­å»æŸ¥æ‰¾å¯¹åº”çš„å±æ€§, å¦‚æœæ‰¾åˆ°å°±ç›´æ¥ä½¿ç”¨
// 2. å¦‚æœæ²¡æœ‰æ‰¾åˆ°, é‚£ä¹ˆä¼šæ²¿ç€å®ƒçš„åŸå‹é“¾å»æŸ¥æ‰¾ [[Prototype]]
// obj.age = 18
obj.__proto__.age = 18;

console.log(obj.age);
```

![image-20220512145737319](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20220512145737319.png)

å…¶å®è¿™ä¸ªéšå¼åŸå‹ï¼Œå°±æ˜¯æµè§ˆå™¨ä¸ºäº†å®ç°`[[Prototype]]` æå‡ºæ¥çš„ \_\_proto\_\_

```javascript
var obj = {
  id: 'chin',
  // æœ¬è´¨å°±æ˜¯æ¯ä¸€ä¸ªå¯¹è±¡æµè§ˆå™¨éƒ½ç»™å¥¹å¼„äº†ä¸€ä¸ª
  __proto__: {},
};
```

> æ€»ç»“
>
> - éšå¼åŸå‹æ˜¯ä»€ä¹ˆï¼Ÿâ†’ ä»»ä½•**å¯¹è±¡**ä¸­éƒ½æœ‰çš„ä¸€ä¸ªéšè—å±æ€§
> - æ€ä¹ˆæ‰èƒ½è·å–ï¼Ÿâ†’ æµè§ˆå™¨é‡Œå®ç°äº†`__proto__`(éæ ‡å‡† å¤§å®¶éƒ½ç”¨)ã€‚ä½†æ­£è§„çš„åšæ³•æ˜¯`Object.getPrototypeOf(a);`
> - éšå¼åŸå‹æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿâ†’ å½“ä½¿ç”¨**[[getter]]**è·å–æ•°æ®çš„æ—¶å€™ï¼Œä¼šä¼˜å…ˆåœ¨è‡ªå·±çš„**å†…éƒ¨æŸ¥æ‰¾**ã€‚æ²¡æœ‰çš„è¯ï¼Œä¼šé¡ºç€**åŸå‹å¯¹è±¡æ‰¾**ã€‚

å½“å®šä¹‰ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå†…å­˜å›¾çš„è¡¨ç°ï¼Ÿ

```js
function Person() {}
```

![image-20230120152043503](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20230120152043503.png)

é‚£ä¹ˆå‡½æ•°æœ‰æ²¡æœ‰éšå¼åŸå‹ï¼Ÿæœ‰çš„ï¼

æ‰€æœ‰çš„å‡½æ•°çš„çˆ¶ç±»ï¼Œéƒ½æ˜¯ Functionï¼Œæ‰€ä»¥

```js
function Person() {}

console.log(Person.__proto__ === Function.prototype); // true
```

> å›å¤´è§£ç­”ä¸€ä¸‹ä¸Šé¢çš„é—®é¢˜
>
> - éšå¼åŸå‹æ˜¯ä»€ä¹ˆï¼Ÿ**éšå¼åŸå‹æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸€ä¸ªåœ°å€ã€‚**
> - ä¸ºä»€ä¹ˆå«éšå¼çš„ï¼Ÿå› ä¸ºè¿™ä¸ªä¸€èˆ¬æ— æ³•è·å–ï¼Œåƒæ˜¯ä¸€ä¸ªéšå½¢çš„æ‰‹ã€‚
> - ä»€ä¹ˆæ•°æ®æœ‰ï¼Ÿæ‰€æœ‰çš„å¯¹è±¡å’Œå‡½æ•°éƒ½æœ‰ï¼å¯¹è±¡çš„éšå¼åŸå‹æŒ‡å‘ä»–çš„äº²ç”Ÿçˆ¶äº²ã€‚æ‰€æœ‰å‡½æ•°çš„äº²ç”Ÿçˆ¶äº²æ˜¯`Function.prototype`

## 4. æ˜¾å¼åŸå‹ prototype

ä¸Šé¢è¯´å®Œäº†éšå¼çš„ï¼Œç°åœ¨å¼€å§‹æ˜¾å¼çš„ã€‚

å‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥ä¸Šé¢**å¯¹è±¡æœ‰çš„**ï¼Œ**å‡½æ•°è¿™é‡Œä¹Ÿæœ‰**ï¼ï¼ä¹Ÿå«æ˜¾å¼åŸå‹ï¼

è¿™é‡Œå¯èƒ½ç†è§£èµ·æ¥æœ‰ç‚¹éº»çƒ¦ã€‚æ€»ç»“ä¸€ä¸‹å§ã€‚è¿™æ®µå¾ˆé‡è¦ï¼

```js
const obj = {}; // åªæ˜¯æ™®é€šå¯¹è±¡ â†’ éƒ½æœ‰__proto__
function foo() {} // æ—¢æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼ˆè¯´æ˜å¯ä»¥newï¼‰ï¼Œåˆæ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼ˆå¯ä»¥ç›´æ¥è°ƒç”¨ï¼‰ï¼Œåˆæ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼ˆæœ‰è‡ªå·±çš„éšå¼åŸå‹__proto__ æ˜¯ä»new Functionå‡ºæ¥çš„ï¼‰ã€‚ä¸‰åˆä¸€ï¼å› ä¸ºå‡½æ•°å°±æ˜¯JSçš„ä¸€ç­‰å…¬æ°‘ã€‚
```

ä½†æ˜¯å‡½æ•°è‡ªå·±æœ‰ä¸€ä¸ªè‡ªå·±**ç‹¬æœ‰**çš„ **æ˜¾å¼åŸå‹ prototype**ï¼æ‰“å°å‡ºæ¥ä¹Ÿæ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼å¯¹è±¡æ˜¯æ²¡æœ‰**prototype çš„**ï¼

ä¸ºä»€ä¹ˆå«æ˜¾å¼åŸå‹ï¼ŸåŒºåˆ«äºä¸Šé¢çš„éšå¼ï¼Œè¿™ä¸ªæ˜¯æ‰€æœ‰å‡½æ•°éƒ½æœ‰çš„ã€‚å¯ä»¥ç›´æ¥ä½  ide æç¤ºçš„ã€‚

> è¿™ä¸ªæ˜¾å¼åŸå‹å•¥ä½œç”¨ï¼Ÿ
>
> ä¸ºäº†æ„å»ºå¯¹è±¡çš„æ—¶å€™ï¼ŒæŠŠè¿™ä¸ª prototype èµ‹å€¼ç»™ \_\_proto\_\_ã€‚ä¹Ÿå°±æ˜¯ new çš„æ—¶å€™çš„å…¶ä¸­ä¸€ä¸ªæ­¥éª¤ â†‘ã€‚

è¿™ä¸ªåªåœ¨ä½ çš„å‡½æ•°æˆä¸ºèœ˜è››ä¾ ï¼ˆnewï¼‰çš„æ—¶å€™æœ‰ä½œç”¨ï¼Œå½“ä½ é€šè¿‡ new è®©è‡ªå·±æˆä¸ºæ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™æ–°å»ºçš„å¯¹è±¡çš„ \_\_proto\_\_ å°± **æŒ‡å‘**äº† å‡½æ•°çš„ prototypeã€‚

ä¹Ÿå°±æ˜¯ `å¯¹è±¡.__proto__ = å‡½æ•°.prototype` ï¼ˆå†…éƒ¨è‡ªåŠ¨æ“ä½œï¼‰

å…¶å®å‡½æ•°.prototype ä¹Ÿå°±æ˜¯ä¸€ä¸ªå¯¹è±¡åœ°å€ `å‡½æ•°.prototype={}ï¼Œç„¶åè¿™ä¸ª{}æœ‰ä¸ªconstructorå±æ€§çš„æ„Ÿè§‰`

```javascript
function foo() {
  console.log('foo');
}
var f1 = new foo();
console.log(f1.__proto__ === foo.prototype);
```

ä¸Šé¢ä¸€æ®µçš„å†…å­˜å›¾æ„Ÿè§‰

![image-20220411171027390](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20220411171027390.png)

## 5. åŸå‹ä¸åŸå‹é“¾

### ä»€ä¹ˆæ˜¯åŸå‹ï¼Ÿ

æˆ‘æ„Ÿè§‰åŸå‹çš„**æœ¬è´¨å°±æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼ˆåœ°å€ï¼‰**ï¼Œåˆ†ä¸ºä¸¤å¤§ç±»ã€‚**æ˜¾å¼åŸå‹å’Œéšå¼åŸå‹**ã€‚è¿™ä¸¤ä¸ªç›¸äº’è”ç³»ï¼Œä½†åˆå„å¸å…¶èŒã€‚

- ç›¸äº’è”ç³» â†’ å¯¹è±¡çš„éšå¼åŸå‹ï¼ŒæŒ‡å‘äº†å‡½æ•°çš„æ˜¾å¼åŸå‹ã€‚
- å„å¸å…¶èŒ â†’ `__proto__`æ˜¯åŸå‹é“¾çš„ä¸€æ¡æœç´¢æŸ¥æ‰¾ç»³å­ã€‚`prototype`å°±åƒæ˜¯å°ç« çš„æ¨¡å­ã€‚ä¸¤è€…éƒ½æ˜¯å¯¹è±¡ã€‚
  - åªè¦æ˜¯å¯¹è±¡å°±æœ‰`__proto__`
  - åªè¦æ˜¯å‡½æ•°æ—¢æœ‰`__proto__`ï¼Œåˆæœ‰`prototype`

### ä»€ä¹ˆæ˜¯åŸå‹é“¾ï¼Ÿ

åŸå‹é“¾å°±æ˜¯ä¸€ç§å¯»æ‰¾å˜é‡çš„æ–¹å¼å§ã€‚è‡ªå·±æ‰¾ä¸åˆ°ï¼Œå°±æ‰¾åŸå‹é“¾ä¸Šçš„ã€‚é¡ºç€è¿™ä¸ªé“¾å­å‘ä¸Šæ‰¾~~ ä¸€ç›´æ‰¾åˆ°é¡¶å±‚å¯¹è±¡ã€‚

åŸå‹é“¾åœ¨å“ªé‡Œï¼Ÿ

> æ‰€æœ‰å¯¹è±¡éƒ½æœ‰åŸå‹é“¾ï¼ŒåŒ…æ‹¬åŸå‹å¯¹è±¡`XXX.prototype`

![image-20230121220816952](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20230121220816952.png)

é¡¶å±‚åŸå‹æ˜¯ä»€ä¹ˆï¼Ÿ

```js
const obj = {
  id: 'uu1',
};

obj.__proto === Object.prototype; // true
obj.__proto__.__proto__; // null
```

Object ä¸Šçš„å°±æ˜¯é¡¶å±‚åŸå‹äº†ã€‚

## 5. JS é‡Œçš„ç»§æ‰¿

å¦‚æœ JS èƒ½åƒ Java ä¸€æ ·ï¼Œä¸€ä¸ª extends èƒ½è§£å†³å¤šå¥½ã€‚å¯æƒœäº†ï¼Œå³ä½¿ ES6 ä¹Ÿæœ‰ extendsï¼Œåªæ˜¯ä¸ªè¯­æ³•ç³–æœ¬è´¨è¿˜æ˜¯ç”¨çš„åŸå‹é“¾ã€‚æ‰€ä»¥è¿˜æ˜¯è¦å­¦ä¼šè¿™ä¸ªã€‚

ä¸ºä»€ä¹ˆè¦æœ‰ç»§æ‰¿ï¼Ÿå…¶å®å°±æ˜¯ä¸ºäº†å…±é€šä¸€äº›ä¸œè¥¿ï¼ˆä¸»è¦æ˜¯å‡½æ•°ï¼‰ï¼Œè¿™æ ·å¯ä»¥çœå†…å­˜ï¼Œå¹¶ä¸”å†™èµ·æ¥é€»è¾‘ä¹Ÿæ›´æ¸…æ™°ã€‚

```js
// çˆ¶ç±»
function Person(name, age) {
  this.name = name;
  this.age = age;
}
Person.prototype.eat = function () {
  console.log('eating..');
};

// å­ç±»
function Student(sitd) {
  this.sid = sid;
}
Student.prototype.study = function () {
  console.log('studying..');
};
```

> è¿™ä¸ªåˆ°åº•æ€ä¹ˆå®ç°ç»§æ‰¿çš„å‘¢ï¼Ÿ

### åŸå‹é“¾åŸºæœ¬å®ç°

ä¸‹é¢çš„è¿™æ®µä»£ç å°±å¯ä»¥å®ç°ç»§æ‰¿ï¼Œé‚£ä¹ˆåŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå¯ä»¥çœ‹ä¸€ä¸‹å†…å­˜å›¾ã€‚

```js
// çˆ¶ç±»
function Person(name, age) {
  this.name = name;
  this.age = age;
}
Person.prototype.eat = function () {
  console.log(`${this.name} is eating`);
};

// å­ç±»
function Student(sitd) {
  this.sid = sid;
}
Student.prototype.study = function () {
  console.log(`${this.sid} is studying`);
};

// è¿™æ ·å°±å¯ä»¥å®ç°ç»§æ‰¿
Student.prototype = new Person();
// ä¸ºä»€ä¹ˆï¼Ÿ
```

å†…å­˜å›¾è§£æ

![image-20230122215408187](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20230122215408187.png)

ä¸Šé¢è™½ç„¶å®ç°äº†å…±äº«è¿™ä¸ª eating çš„æ–¹æ³•ï¼Œä½†æ˜¯ä¼šå‡ºç°å¼Šç«¯ã€‚

- å¼Šç«¯ 1 æ‰“å°ä¸å‡ºå…·ä½“å±æ€§ â†’ ä½ æ‰“å° stu è¿™ä¸ªå¯¹è±¡ï¼Œä¼šå‡ºç° Person è¿™ä¸ªæ„é€ å‡½æ•°ã€‚
- å¼Šç«¯ 2 ä¿®æ”¹äº† a å¯¹è±¡çš„åœ°å€å±æ€§ï¼Œb ä¹Ÿä¼šä¼šè¢«ä¿®æ”¹ â†’ ä½ åœ¨ Person é‡Œæ·»åŠ ä¸€ä¸ªæ•°ç»„è¿™ç§å¸¦åœ°å€çš„æ•°æ®ï¼Œé‚£ä¹ˆ stu è¿™ä¸ªå¯¹è±¡ä¹Ÿè¢«ä¿®æ”¹äº†
- å¼Šç«¯ 3 æ— æ³•ä¼ é€’å‚æ•°

```js
// çˆ¶ç±»
function Person(name, age) {
  this.name = 'chin';
  this.age = 88;
  this.friends = [];
}
Person.prototype.eat = function () {
  console.log(`${this.name} is eating`);
};

// å­ç±»
function Student(sitd) {
  this.sid = '001';
}
Student.prototype.study = function () {
  console.log(`${this.sid} is studying`);
};

// å¼Šç«¯1
const stu = new Student();
console.log(stu); // Person { sid: '001' }

// å¼Šç«¯2
const stu1 = new Student();
const stu2 = new Student();
stu1.friends.push('kitty');
console.log(stu2.friends); // [ 'kitty' ]

// å¼Šç«¯3 æ— æ³•ä¼ é€’å‚æ•°
const stu3 = new Student(æˆ‘æƒ³ä¼ é€’nameï¼Œageï¼Œsidã€‚è¿™é‡Œæ€ä¹ˆå†™å•Šï¼Œé™¤éä½ æ”¹å˜åŸæ¥studentçš„æ–¹æ³•);
```

### å€Ÿç”¨æ„é€ å‡½æ•°

ä¸ºäº†è§£å†³ä¸Šé¢çš„å¼Šç«¯ï¼Œä¸‹é¢æœ‰äº†ä¸€ä¸ªæ–°çš„å†™æ³• `constructor stealing`

```js
// çˆ¶ç±»
function Person(name, age) {
  this.name = name;
  this.age = age;
}
Person.prototype.eat = function () {
  console.log(`${this.name} is eating`);
};

// å­ç±»
function Student(name, age, sid) {
  Person.call(this, name, age);
  this.sid = sid;
}
Student.prototype.study = function () {
  console.log(`${this.sid} is studying`);
};

Student.prototype = new Person();

const stu = new Student('chin', 77, '001');
console.log(stu); // Person { name: 'chin', age: 77, sid: '001' }
```

ä¸Šé¢çš„ä»£ç æœ€é‡è¦çš„åœ°æ–¹å°±æ˜¯

```js
// å­ç±»
function Student(name, age, sid) {
  // å‰é¢ä¸Šçš„æ—¶å€™è¯´è¿‡äº†Personæœ¬èº«å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½¿ç”¨callå°±æ˜¯å€Ÿç”¨äº†è¿™ä¸ªPersonå‡½æ•°
  // ä¹Ÿå°±æ˜¯è°ƒç”¨äº†ä¸€æ¬¡Person()å‡½æ•°ï¼Œä½†å®é™…ä¸Šä½¿ç”¨çš„æ˜¯Studentçš„this
  Person.call(this, name, age);
  this.sid = sid;
}
```

å†…å­˜å›¾å¦‚ä¸‹

![image-20230122221334044](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20230122221334044.png)

ä½†æ˜¯è¿™ç§ä¹Ÿæœ‰å¼Šç«¯

- å¼Šç«¯ 1 Person è¢«è°ƒç”¨äº† 2 æ¬¡ï¼Œæ˜æ˜æˆ‘åªè¦ student å¯¹è±¡ï¼Œä¸ºä»€ä¹ˆ Person è°ƒç”¨äº†ä¸¤æ¬¡ï¼Ÿ`new Person()`è°ƒç”¨äº†ä¸€æ¬¡ï¼Œ`Person.call()`
- å¼Šç«¯ 2 å¤šäº†ä¸€äº›æ— ç”¨çš„ undefined

### åŸå‹å¼ç»§æ‰¿

è¿™æ˜¯ä¸€ä¸ªæ’æ›²ã€‚è¯´ä¸€ä¸‹æŸä¸ª API çš„åŸç†ã€‚

å°±æ˜¯æˆ‘æƒ³é€šè¿‡ä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨è¿™ä¸ªå¯¹è±¡åŸºç¡€ä¸Šç»§æ‰¿ã€‚æ€ä¹ˆå®ç°

```js
const obj = {
  name: 'chin',
  age: 99,
};

function createObject(object) {
  function Fn() {}
  // æœ¬æ¥Fnçš„prototypeåº”è¯¥ç­‰äºconstructor{}
  // è¿™é‡Œç›´æ¥ç­‰äºäº†ä½ ä¼ å…¥çš„objectå¯¹è±¡
  // è¿™æ ·çš„è¯ ä»¥åä½ ç”¨FnåŸå‹ç”Ÿæˆçš„å¯¹è±¡çš„__proto__éƒ½æŒ‡å‘äº†object
  Fn.prototype = object;
  return new Fn();
}

const demo = createObject(obj);
console.log(demo.name); // chin
console.log(demo.age); // 99
```

> ä½†æ˜¯éšç€å¤§å®¶çš„å·ï¼Œå‡ºç°äº†ä¸€ä¸ªæ–°çš„ APIï¼Œ`Object.create()` å¯ä»¥å®ç°ä¸Šé¢çš„æ•ˆæœã€‚æ‰€ä»¥å°±æ²¡äººç”¨äº†ï¼Œä¹Ÿå°±æ˜¯è¯´`Object.create()`å¯ä»¥é€šè¿‡ä¸€ä¸ªç°æœ‰çš„å¯¹è±¡ç”Ÿæˆä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚

### å¯„ç”Ÿå¼ç»§æ‰¿

`å·¥å‚æ¨¡å¼ + åŸå‹å¼ç»§æ‰¿ = å¯„ç”Ÿå¼ç»§æ‰¿`

ä¸ºä»€ä¹ˆä¼šæœ‰ï¼Œè§£å†³äº†ä»€ä¹ˆï¼ŸæŒ‰ç…§ä¸Šé¢å­¦ä¹ çš„ Objectã€‚è¿™ä¸ªæ–¹æ³•æœ‰ä¸€ä¸ªå¼Šç«¯

```js
const obj = {
  name: 'chin',
  age: 88,
};

const student = Object.create(obj);

// å¦‚æœè¿™ä¸ªæ—¶å€™æƒ³ç»™studentæ·»åŠ ä¸€ä¸ªweightå±æ€§æ€ä¹ˆåŠ
student.weight; // è¿™æ ·å°±å¯ä»¥äº†å‘—
// ğŸ˜±é‚£å¦‚æœæœ‰100ä¸ªstudentå¯¹è±¡å‘¢ï¼Ÿ
```

æ‰€ä»¥å°±é€ å‡ºæ¥äº†ä¸€ä¸ªå·¥å‚å‡½æ•°ï¼Œå¯ä»¥æ‰¹é‡æ·»åŠ å±æ€§ã€‚

```js
const obj = {
  name: 'chin',
  age: 88,
};

function createStudent(weight) {
  const student = Object.create(obj);
  student.weight = weight;
  student.eat = function () {
    console.log('eating');
  };
  return student;
}

const newStu = createStudent(188);
console.log(newStu.weight); // 188
```

### å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ï¼ˆæœ€ç»ˆæ–¹æ¡ˆï¼‰

ç»ˆäºèµ°åˆ°æœ€åäº†ã€‚ã€‚ã€‚

```js

```
