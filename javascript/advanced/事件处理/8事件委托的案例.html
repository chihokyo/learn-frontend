<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>8事件委托的案例</title>
    <style>
      .active {
        background-color: greenyellow;
      }
    </style>
  </head>
  <body>
    <!-- 关于事件委托 难道还要给下面每一个li都写上同样的事件？-->
    <ul>
      <li class="1">1</li>
      <li class="2">2</li>
      <li class="3">3</li>
      <li class="4">4</li>
      <li class="5">5</li>
      <li class="6">6</li>
      <li class="7">7</li>
      <li class="8">8</li>
      <li class="9">9</li>
      <li class="10">10</li>
    </ul>
  </body>

  <script>
    // const ulEl = document.querySelector('ul');
    // ulEl.addEventListener('click', function (e) {
    //   // 方法1 将之前的active删除掉
    //   //   for (let i = 0; i < ulEl.children.length; i++) {
    //   //     ulEl.children[i].classList.remove('active');
    //   //   }

    //   // 方法2 直接选active元素给cut掉
    //   const activeEl = ulEl.querySelector('.active');
    //   // 因为a ctiveEl 第一次没有所以找不到 classList 所以就用了&&
    //   //   if(activeEl){...}　这样虽然也可以吧 但是不如下面这样 &&
    //   activeEl && activeEl.classList.remove('active');
    //   // 判断防止ul本身被赋予active
    //   if (e.target !== ulEl) e.target.classList.add('active');
    // });

    // ******************************************

    // 方法3 先把上面的都给注释掉 重点
    const ulEl = document.querySelector('ul');
    let activeEl = null; // 拿一个变量记录下
    ulEl.addEventListener('click', function (e) {
      // 当之前有过了，就记录一下
      if (activeEl) {
        activeEl.classList.remove('active');
      }
      // 给当前你点击的添加一下
      e.target.classList.add('active');
      activeEl = e.target; // 记录下这个元素
    });
  </script>
</html>
